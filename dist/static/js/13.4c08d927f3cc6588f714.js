webpackJsonp([13],{"7Li9":function(e,t){},GgiC:function(e,t){},SXOF:function(e,t){},muMf:function(e,t){},woeB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("UuFX");var i=s("J1XP"),a=(s("eqfM"),s("/QYm")),n=(s("9++/"),s("QhyB")),o=s("SpLM"),c=s("mQKa"),m=(s("MY4N"),s("0zAV")),r=s("7+uW"),l=s("KtQ0");r.a.use(m.a).use(a.a);var d={props:{messageUserId:{type:String,default:null},srcCommentId:{type:String,default:""},userNick:{type:String,default:null}},data:()=>({message:""}),methods:{async sendComment(){if(""===this.message)return Object(a.a)("内容为空");const e=await Object(l.e)({msgId:this.$route.query.messageId,msgUserId:this.messageUserId,content:this.message,srcCommentId:this.srcCommentId});if(!e&&"fail"===e.type)return Object(a.a)("服务器错误，请联系客服");Object(a.a)("发送成功"),this.$emit("sendComment",e.data)},toSendCommentPage(){this.$router.push({name:"send-comment",query:{userNick:encodeURIComponent(this.userNick),messageId:this.$route.query.messageId,messageUserId:this.messageUserId,content:encodeURIComponent(this.message),srcCommentId:this.srcCommentId}})}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"write-message-container f-row-between"},[i("div",{staticClass:"editor"},[i("van-field",{ref:"textInput",attrs:{rows:"3",clearable:"",type:"textarea",placeholder:"写留言和大家互动吧"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),i("div",{staticClass:"operator f-col-between-r"},[i("img",{attrs:{src:s("hBeZ"),alt:""},on:{click:e.toSendCommentPage}}),e._v(" "),i("p",{on:{click:e.sendComment}},[e._v("\n      发送\n    ")])])])},staticRenderFns:[]};var u=s("VU/8")(d,h,!1,function(e){s("7Li9")},"data-v-0f0218dc",null).exports,g={props:{backColor:{type:String,default:"rgba(249,249,249,1)"}}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section-link-container f-row-between",style:{"background-color":this.backColor}},[t("div",{staticClass:"cover",style:{"background-image":"url( https://qds-files.oss-cn-qingdao.aliyuncs.com/image/1560909212_lEd30eNK.png )"}}),this._v(" "),this._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content f-col-between"},[t("p",{staticClass:"title one-ellipsis"},[this._v("\n      03. 与孩子有效沟通的四个原则\n    ")]),this._v(" "),t("p",{staticClass:"tag"},[this._v("\n      亲子沟通\n    ")])])}]};var v=s("VU/8")(g,p,!1,function(e){s("SXOF")},"data-v-75b203b3",null).exports,f={props:{isShowReplyLink:{type:Boolean,default:!1},hideLimit:{type:Number,default:2},isShowMoreLink:{type:Boolean,default:!0},commentList:{type:Array,default:[]},messageId:{type:String,default:null},commentCount:{type:Number,default:3}},components:{SectionLink:v},methods:{toMessageDetailPage(){this.$router.push({name:"detail-message",query:{messageId:this.messageId}})}}},C={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.commentList&&e.commentList.length>0?s("div",{staticClass:"reply-list-container",on:{click:e.toMessageDetailPage}},[e._l(e.commentList,function(t,i){return s("div",{key:t._id},[i<e.hideLimit?s("div",{staticClass:"reply"},[s("p",{staticClass:"content"},[s("span",{staticClass:"nickname"},[e._v("\n          "+e._s(t.nickName)+"\n        ")]),e._v("\n        "+e._s("："+t.content)+"\n      ")]),e._v(" "),e.isShowReplyLink?s("SectionLink",{staticStyle:{"margin-top":"10px"},attrs:{backColor:"#fff"}}):e._e()],1):e._e()])}),e._v(" "),e.isShowMoreLink&&e.commentList.length>e.hideLimit?s("p",{staticClass:"more-reply"},[e._v("\n    共"+e._s(e.commentCount)+"条回复 >\n  ")]):e._e()],2):e._e()},staticRenderFns:[]};var y=s("VU/8")(f,C,!1,function(e){s("wxNj")},"data-v-5a322747",null).exports;r.a.use(a.a);var _={props:{isShowCommentLink:{type:Boolean,default:!0},isShowReply:{type:Boolean,default:!0},hideLimit:{type:Number,default:2},messageList:{type:Array,default:[]},isShowReplyLink:{type:Boolean,default:!1},isShowMoreLink:{type:Boolean,default:!0}},components:{SectionLink:v,ReplyList:y},data:()=>({praise:{yes:s("Dn6n"),no:s("P8Qr")}}),methods:{async switchPraise(e,t){const s=await Object(l.c)({commentId:e._id,isPraise:!e.isPraise});if(!s||"fail"===s.type)return Object(a.a)("服务器错误，请联系客服");this.$emit("switchPraise",t)}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-list-container"},e._l(e.messageList,function(t,i){return s("div",{key:t._id,class:["message-region",i>0?"m-top-25":""]},[s("div",{staticClass:"main-area flx"},[s("div",{staticClass:"avatar-area"},[s("img",{attrs:{src:t.avatar,alt:""}})]),e._v(" "),s("div",{staticClass:"content-area"},[s("div",{staticClass:"right-content f-row-between"},[s("div",{staticClass:"info f-col-between"},[s("div",{staticClass:"one-row f-i-c"},[s("p",{staticClass:"nick"},[e._v(e._s(t.nickName))])]),e._v(" "),s("div",{staticClass:"two-row f-i-c"},[s("p",[e._v("\n                "+e._s(t.msgTime)+"\n              ")])])]),e._v(" "),s("div",{staticClass:"like f-row-end-c",on:{click:function(s){return e.switchPraise(t,i)}}},[s("span",[e._v("\n              "+e._s(t.praiseUv)+"\n            ")]),e._v(" "),s("img",{attrs:{src:t.isPraise?e.praise.yes:e.praise.no,alt:""}})])]),e._v(" "),s("div",{staticClass:"comment"},[e._v("\n          "+e._s(t.content)+"\n        ")]),e._v(" "),e.isShowReply?s("ReplyList",{staticStyle:{"margin-top":"15px"},attrs:{hideLimit:e.hideLimit,isShowMoreLink:e.isShowMoreLink,isShowReplyLink:e.isShowReplyLink,commentList:t.comments,messageId:t._id,commentCount:t.commentCount}}):e._e(),e._v(" "),e.isShowCommentLink?s("SectionLink",{staticStyle:{"margin-top":"15px"}}):e._e()],1)]),e._v(" "),s("div",{staticClass:"split-1"})])}),0)},staticRenderFns:[]};var L=s("VU/8")(_,w,!1,function(e){s("muMf")},"data-v-6f93c8a2",null).exports,k=s("Cuxu");r.a.use(i.a).use(a.a).use(n.a);var S={components:{MessageList:o.a,WriteMessageBox:c.a,CommentList:L,WriteComment:u},data:()=>({isShowWriteBox:!1,clientHeight:0,messageList:[],comment:{list:[],pageSize:20,pageNum:0,loading:!1,finished:!0}}),created(){document.title="精彩留言"},mounted(){this.clientHeight=document.body.clientHeight,this.getMessageDetail(this.$route.query.messageId),this.getCommentsByMessageId()},methods:{async getMessageDetail(e){const t=await Object(k.a)(e);if(!t||"fail"===t.type)return Object(a.a)("服务器错误，请联系客服");this.messageList.push(t.data)},async getCommentsByMessageId(){const e=await Object(l.a)(this.$route.query.messageId,this.comment.pageNum,this.comment.pageSize);if(!e||"fail"===e.type)return Object(a.a)("服务器错误，请联系客服");this.comment.list=[...this.comment.list,...e.data],e.data.length<this.comment.pageSize?this.comment.finished=!0:(this.comment.pageNum+=1,this.comment.finished=!1),this.comment.loading=!1},switchPraise(e){this.messageList[e].isPraise=!this.messageList[e].isPraise,this.messageList[e].praiseUv=this.messageList[e].isPraise?this.messageList[e].praiseUv+1:this.messageList[e].praiseUv-1},switchPraiseComment(e){this.comment.list[e].isPraise=!this.comment.list[e].isPraise,this.comment.list[e].praiseUv=this.comment.list[e].isPraise?this.comment.list[e].praiseUv+1:this.comment.list[e].praiseUv-1},sendComment(e){this.comment.list.unshift(e),this.isShowWriteBox=!1},clickMessageOverlay(e){e.clientY>this.clientHeight-130||(this.isShowWriteBox=!1)}}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"detail-message-container"},[s("div",{staticClass:"message-box"},[s("MessageList",{attrs:{messageList:e.messageList,isShowCommentLink:!1},on:{switchPraise:e.switchPraise}})],1),e._v(" "),s("div",{staticClass:"block-div-1"}),e._v(" "),s("div",{staticClass:"message-box"},[s("van-list",{attrs:{finished:e.comment.finished,"finished-text":"没有更多了"},on:{load:e.getCommentsByMessageId},model:{value:e.comment.loading,callback:function(t){e.$set(e.comment,"loading",t)},expression:"comment.loading"}},[s("CommentList",{attrs:{messageList:e.comment.list,isShowCommentLink:!1,isShowReply:!1},on:{switchPraise:e.switchPraiseComment}})],1)],1),e._v(" "),s("WriteMessageBox",{staticClass:"write-message-box",on:{click:function(t){e.isShowWriteBox=!0}}}),e._v(" "),s("van-overlay",{attrs:{show:e.isShowWriteBox},on:{click:e.clickMessageOverlay}},[e.isShowWriteBox?s("WriteComment",{staticClass:"write-message",attrs:{messageUserId:e.messageList[0].userId,srcCommentId:"",userNick:e.messageList[0].nickName},on:{sendComment:e.sendComment}}):e._e()],1),e._v(" "),s("div",{staticClass:"bottom-block"})],1)},staticRenderFns:[]};var I=s("VU/8")(S,b,!1,function(e){s("GgiC")},"data-v-63caebd2",null);t.default=I.exports},wxNj:function(e,t){}});
//# sourceMappingURL=13.4c08d927f3cc6588f714.js.map